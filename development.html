

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Development &mdash; dohq-teamcity 1.0.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="dohq_teamcity.models package" href="api/dohq_teamcity.models.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> dohq-teamcity
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-usage.html">Getting started with the API</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">API Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="swagger.html">Swagger autogenerated docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/dohq_teamcity.html">dohq_teamcity package</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Development</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#about-library">About library</a></li>
<li class="toctree-l2"><a class="reference internal" href="#swagger-or-not-swagger">Swagger or not swagger</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#run-swagger">Run swagger</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#documentation">Documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#build-and-view">Build and view</a></li>
<li class="toctree-l3"><a class="reference internal" href="#publish">Publish</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#create-release">Create release</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">dohq-teamcity</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Development</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/development.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="development">
<h1>Development<a class="headerlink" href="#development" title="Permalink to this headline">¶</a></h1>
<div class="section" id="about-library">
<h2>About library<a class="headerlink" href="#about-library" title="Permalink to this headline">¶</a></h2>
<p>We use <a class="reference external" href="https://swagger.io/docs/specification/about/">OpenAPI (Swagger)</a>  and <a class="reference external" href="https://github.com/swagger-api/swagger-codegen">swagger-codegen</a> to generate most of code.
But swagger generate not user-friendly libraries, we extend them manually. If you want fix some bug or realize some feature, please read this before.</p>
</div>
<div class="section" id="swagger-or-not-swagger">
<h2>Swagger or not swagger<a class="headerlink" href="#swagger-or-not-swagger" title="Permalink to this headline">¶</a></h2>
<p>You want to change a file - look carefully at the table, maybe it was generated automatically and it needs to be expanded using the template.
But if you want to make changes really only in one class or documentation - see the column <strong>Custom extenstion</strong></p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="5%" />
<col width="14%" />
<col width="14%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Files</th>
<th class="head">Template</th>
<th class="head">Custom extension</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>Code</strong></td>
<td><code class="docutils literal notranslate"><span class="pre">dohq_teamcity/models/*</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">swagger/template/model.mustache</span></code></td>
<td>You can extend Model in <code class="docutils literal notranslate"><span class="pre">dohq_teamcity/custom/models.py</span></code> or <code class="docutils literal notranslate"><span class="pre">dohq_teamcity/custom/base_model.py</span></code> for all object</td>
</tr>
<tr class="row-odd"><td><strong>Code</strong></td>
<td><code class="docutils literal notranslate"><span class="pre">dohq_teamcity/api/*</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">swagger/template/api.mustache</span></code></td>
<td>You can extend API in <code class="docutils literal notranslate"><span class="pre">dohq_teamcity/custom/api.py</span></code></td>
</tr>
<tr class="row-even"><td><strong>Docs</strong></td>
<td><code class="docutils literal notranslate"><span class="pre">docs-sphinx/swagger/models*</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">swagger/template/model_doc.mustache</span></code></td>
<td>If you want write some usefull examples - change a file in the directory <code class="docutils literal notranslate"><span class="pre">docs-sphinx/examples/models</span></code></td>
</tr>
<tr class="row-odd"><td><strong>Docs</strong></td>
<td><code class="docutils literal notranslate"><span class="pre">docs-sphinx/swagger/api*</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">swagger/template/model_doc.mustache</span></code></td>
<td>If you want write some usefull examples - change a file in the directory <code class="docutils literal notranslate"><span class="pre">docs-sphinx/examples/api</span></code></td>
</tr>
<tr class="row-even"><td><strong>Other part</strong></td>
<td>You can change as you want :)</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<div class="section" id="run-swagger">
<h3>Run swagger<a class="headerlink" href="#run-swagger" title="Permalink to this headline">¶</a></h3>
<p>If you want run <code class="docutils literal notranslate"><span class="pre">swagger-codegen</span></code> (after change some <code class="docutils literal notranslate"><span class="pre">mustache</span></code> file, for example), use it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Install java before :)</span>

 <span class="n">bash</span> <span class="o">./</span><span class="n">swagger</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>If you have new <code class="docutils literal notranslate"><span class="pre">swagger.json</span></code> from TeamCity server (you can find it on page <a class="reference external" href="https://teamcity.example.com/app/rest/swagger.json">https://teamcity.ptsecurity.ru/app/rest/swagger.json</a>) ,
replace you fqdn in the file to <code class="docutils literal notranslate"><span class="pre">teamcity.example.com</span></code>, place it in <code class="docutils literal notranslate"><span class="pre">swagger/swagger.json</span></code> and run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bash</span> <span class="o">./</span><span class="n">swagger</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h2>
<p>Some part of documentation is autogenerated. Please see above table and ensure what type of file you want change.</p>
<div class="section" id="build-and-view">
<h3>Build and view<a class="headerlink" href="#build-and-view" title="Permalink to this headline">¶</a></h3>
<p>We use sphinx to build docs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">docs</span><span class="o">-</span><span class="n">sphinx</span>
<span class="n">make</span> <span class="n">html</span>
<span class="c1"># open ./docs-sphinx/_build/html/index.html on your browser</span>
<span class="n">start</span> <span class="o">./</span><span class="n">_build</span><span class="o">/</span><span class="n">html</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">html</span> <span class="c1"># Windows</span>
</pre></div>
</div>
</div>
<div class="section" id="publish">
<h3>Publish<a class="headerlink" href="#publish" title="Permalink to this headline">¶</a></h3>
<p>For repositories admin:</p>
<blockquote>
<div><ul class="simple">
<li>All documentation saved in <code class="docutils literal notranslate"><span class="pre">docs</span></code>-folder on branches.</li>
<li>We use <code class="docutils literal notranslate"><span class="pre">gh-pages</span></code> as source for publishing on github pages.</li>
<li>Read example how it work on <a class="reference external" href="https://habr.com/post/180213/">habr.com (Russian)</a></li>
</ul>
</div></blockquote>
<p>Run this script to publish new html on <a class="reference external" href="https://devopshq.github.io/teamcity/">https://devopshq.github.io/teamcity/</a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">docs</span>
<span class="n">bash</span> <span class="o">./</span><span class="n">publish</span><span class="o">-</span><span class="n">gh</span><span class="o">-</span><span class="n">pages</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="create-release">
<h2>Create release<a class="headerlink" href="#create-release" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>If you want release this library, reproduce this steps:</dt>
<dd><ul class="first last simple">
<li>Create pull request <a class="reference external" href="https://github.com/devopshq/teamcity/compare/master...develop">develop &lt;= master</a></li>
<li>Request review and pull it</li>
<li>Bump <code class="docutils literal notranslate"><span class="pre">VERSION</span></code> in <a class="reference external" href="https://github.com/devopshq/teamcity/blob/develop/setup.py#L6">setup.py</a> on <code class="docutils literal notranslate"><span class="pre">develop</span></code>-branch after success pull.</li>
</ul>
</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="api/dohq_teamcity.models.html" class="btn btn-neutral" title="dohq_teamcity.models package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, DevOpsHQ.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>